var template=$("#myList").html(),namelist=[{fav:!1},{name:"Lee"}],compiled=_.template(template,{items:namelist});$("body").append(compiled),$(".heart").click(function(){$(".heart, .heart ").css("color","#c2c0c0"),$(this).css("color","#cc3399"),localStorage.pullquote=JSON.stringify(pullquote.fav),localStorage.setItem("pullquote",pullquote)}),$("#tab-favorites").click(function(){$(".app").css("background","white")}),$("#tab-about").click(function(){$(".highlight").html('<p>Oblique Catagies combines <a href="http://en.wikipedia.org/wiki/Oblique_Strategies">Oblique Strategies</a> by Brian Eno and Peter Schmidt with pictures of cats to hilarious, useful ends. It was created by <a href="http://nikiselken.com">Niki Selken</a></p>')});var pullquote=$(".highlight").append(quote[Math.floor(464*Math.random())]);localStorage.pullquote=JSON.stringify(pullquote),localStorage.setItem("pullquote",pullquote);var names=localStorage.getItem("pullquote"),app=app||{};app.main=function(){var t=[],e={},i=function(){$(".heart").off("click").on("click",function(){var e=$(this).parent();t.forEach(function(i,a){i.view.item[0]===e[0]&&t[a].model.update(a)})}),$(".itemDelete").off("click").on("click",function(){var e=$(this).parent();t.forEach(function(i,a){i.view.item[0]===e[0]&&t[a].model.remove(a)})}),$(".item").off("dblclick").on("dblclick",function(){$(this).append("hey")})},a=function(){console.info("rendering"),$("#itemsContainer").empty(),t.forEach(function(t,e){t.model.render(e)})},n=function(i,a){return this.item={title:i,fav:a},this.add=function(){e.model=this,new o(this).add(),l.save()},this.render=function(e){t[e].view.render(),l.save()},this.update=function(e){this.item.fav=!this.item.fav,t[e].view.update(),l.save()},this.remove=function(e){t[e].view.remove(),t.splice(e,1),l.save()},this},o=function(i){return this.item=null,this.add=function(){var a,n=$("<div></div>").addClass("item").hide();a=i.item.fav?$("<span>&#10084;</span>").addClass("itemFavorite fav").appendTo(n):$("<span>&#10084;</span>").addClass("itemFavorite").appendTo(n);$("<span></span>").addClass("itemTitle").html(i.item.title).appendTo(n),$("<span>&times;</span>").addClass("itemDelete").appendTo(n);this.item=n,e.view=this,t.unshift(e),e={}},this.update=function(){this.item.children(".itemFavorite").toggleClass("fav")},this.render=function(){$("#itemsContainer").append(this.item),this.item.fadeIn()},this.remove=function(){this.item.fadeOut()},this},l={load:function(){if(0===localStorage.length){var t=JSON.stringify([]);localStorage.setItem("app",t)}else{var e=JSON.parse(localStorage.getItem("app"));e.forEach(function(t){new n(t.title,t.fav).add()})}},save:function(){var e=[];t.forEach(function(t){e.unshift({title:t.model.item.title,fav:t.model.item.fav})}),localStorage.setItem("app",JSON.stringify(e))}},s=function(){console.info("app init"),l.load(),a(),i()};return{init:s,items:t}}(),$(window).on("load",app.main.init);