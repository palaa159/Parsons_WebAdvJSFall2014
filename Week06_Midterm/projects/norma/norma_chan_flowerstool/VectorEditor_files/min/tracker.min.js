VectorEditor.prototype.unselect=function(t){if(t){this.fire("unselect",t),this.array_remove(t,this.selected);for(var e=0;e<this.trackers.length;e++)this.trackers[e].shape==t&&this.removeTracker(this.trackers[e])}else{for(;this.selected[0];)this.unselect(this.selected[0]);t!==!1&&this.fire("unselected")}},VectorEditor.prototype.selectAdd=function(t){if(0==this.is_selected(t)){if(this.fire("selectadd",t)===!1)return;this.selected.push(t),this.showGroupTracker(t)}},VectorEditor.prototype.selectAll=function(){this.unselect();for(var t=0;t<this.shapes.length;t++)this.selectAdd(this.shapes[t])},VectorEditor.prototype.selectToggle=function(t){0==this.is_selected(t)?this.selectAdd(t):this.unselect(t)},VectorEditor.prototype.select=function(t){this.fire("select",t)!==!1&&(this.unselect(!1),this.selected=[t],this.showTracker(t))},VectorEditor.prototype.removeTracker=function(t){if(t){t.remove();for(var e=0;e<this.trackers.length;e++)this.trackers[e]==t&&this.trackers.splice(e,1)}else for(;this.trackers.length>0;)this.removeTracker(this.trackers[0])},VectorEditor.prototype.updateTracker=function(t){if(t){var e=t.shape,r=e.getBBox();if("path"==e.type&&"path"==this.action.substr(0,4)){var s=Raphael.parsePathString(e.attr("path"));return 2==s.length&&(t[0].attr({cx:r.x+r.width/2,cy:r.y+r.height/2}),t[1].attr({x:s[0][1]-2,y:s[0][2]-2}),t[2].attr({x:s[1][1]-2,y:s[1][2]-2})),void 0}t.translate(r.x-t.lastx,r.y-t.lasty),e._&&e._.rt&&t.rotate(e._.rt.deg,r.x+r.width/2,r.y+r.height/2),t.lastx=r.x,t.lasty=r.y}else for(var i=0;i<this.trackers.length;i++)this.updateTracker(this.trackers[i])},VectorEditor.prototype.hideTooltip=function(){this.tt.hide()},VectorEditor.prototype.tooltip=function(t,e){if(!this.tt){var r=this.draw.set();r.push(this.draw.text(0,0,"x")),this.tt=r}var r=this.tt;r.show(),r.toFront();var s=r[0];s.attr("text",t),s.attr("x",e.x),s.attr("y",e.y);var i=s.getBBox();return s.attr("x",e.x+i.width/2+8),i=s.getBBox(),r},VectorEditor.prototype.markTracker=function(t){return t.node.is_tracker=!0,t},VectorEditor.prototype.newTracker=function(t){for(var e=0;e<this.trackers.length;e++)this.trackers[e].shape==t&&this.removeTracker(this.trackers[e]);this.showTracker(t)},VectorEditor.prototype.showTracker=function(t){var e=(t.getBBox(),this.draw.set());e.shape=t,e.lastx=0,e.lasty=0,this.updateTracker(e)};