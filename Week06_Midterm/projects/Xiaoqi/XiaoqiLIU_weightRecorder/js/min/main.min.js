var app=app||{};app.main=function(){var i=[],t={},e=function(){$("#itemAddBtn").off("click").on("click",n),$(document).off("keypress").on("keypress",function(i){$("#itemInput").focus(),13==i.which&&n()}),$(".itemFavorite").off("click").on("click",function(){var t=$(this).parent();i.forEach(function(e,n){e.view.item[0]===t[0]&&i[n].model.update(n)})}),$(".itemDelete").off("click").on("click",function(){var t=$(this).parent();i.forEach(function(e,n){e.view.item[0]===t[0]&&i[n].model.remove(n)})})},n=function(){var i=$("#itemInput").val();i.length>2?(new o(i).add(),$("#itemInput").val(""),a()):alert("3 characters up pls.")},a=function(){console.info("rendering"),$("#itemsContainer").empty(),i.forEach(function(i,t){i.model.render(t)}),e()},o=function(e){return this.item={title:e,fav:!1},this.add=function(){t.model=this,new s(this).add()},this.render=function(t){i[t].view.render()},this.update=function(t){this.item.fav=!this.item.fav,i[t].view.update()},this.remove=function(t){i[t].view.remove(),i.splice(t,1)},this},s=function(e){return this.item=null,this.add=function(){{var n=$("<div></div>").addClass("item").hide();$("<span>&#10084;</span>").addClass("itemFavorite").appendTo(n),$("<span></span>").addClass("itemTitle").html(e.item.title).appendTo(n),$("<span>&times;</span>").addClass("itemDelete").appendTo(n)}this.item=n,t.view=this,i.unshift(t),t={}},this.update=function(){this.item.children(".itemFavorite").toggleClass("fav")},this.render=function(){$("#itemsContainer").append(this.item),this.item.fadeIn()},this.remove=function(){this.item.fadeOut()},this},c=function(){console.info("app init"),a()};return{init:c,items:i}}(),$(window).on("load",app.main.init);